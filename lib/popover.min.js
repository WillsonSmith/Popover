!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("popover",[],e):"object"==typeof exports?exports.popover=e():t.popover=e()}(this,function(){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),n=16,a=1.05,r=document.getElementById("popover-deactivate-cover"),s=function(){function t(e){var o=this;i(this,t),this.node=e,this.contents=e.querySelector(".popover-contents"),this.activated=!1,this.handleActivation=this.handleActivation.bind(this),this.activatePopover=this.activatePopover.bind(this),this.deactivatePopover=this.deactivatePopover.bind(this),this._resizePopover=this._resizePopover.bind(this),this.constrainedWidth=this.node.hasAttribute("data-constrain-width"),this.activator=document.querySelector('[data-popover-activator-for="'+e.id+'"]'),this.node.setAttribute("tabindex","0"),this.activator.addEventListener("keydown",function(t){return o._tabEventHandler(t,o.node)}),this.node.addEventListener("keydown",function(t){return o._tabEventHandler(t,o.activator.parentNode.nextElementSibling)}),this.activator.addEventListener("focus",this.activatePopover),this.activator.addEventListener("click",function(){o.activator.focus()}),r.addEventListener("click",this.deactivatePopover),window.addEventListener("resize",this._resizePopover)}return o(t,[{key:"handleActivation",value:function(){this.activated?this.deactivatePopover():this.activatePopover()}},{key:"deactivatePopover",value:function(){r.removeAttribute("data-popover-active"),this.node.setAttribute("data-hidden","true"),this.node.removeAttribute("style"),this.activated=!1}},{key:"activatePopover",value:function(){this._positionPopover(),r.setAttribute("data-popover-active","true"),this.node.removeAttribute("data-hidden"),this.activated=!0}},{key:"_tabEventHandler",value:function(t,e){this.activated&&(t.preventDefault(),9===t.keyCode&&(console.log(e),e.focus()))}},{key:"_elementPosition",value:function(t){var e=t.getBoundingClientRect(),i=e.top,o=e.bottom,n=e.right,a=e.left,r=window.pageYOffset;return i+=r,o+=r,{top:i,right:n,bottom:o,left:a,width:n-a,height:o-i}}},{key:"_resizePopover",value:function(){var t=this;this.activated&&window.requestAnimationFrame(function(){t._positionPopover()})}},{key:"_positionPopover",value:function(){var t=this._elementPosition(this.activator),e=t.left+t.width/2;this.constrainedWidth&&(this.node.style["max-width"]=t.width+"px"),this.node.style.left=null,this.node.style.right=null,this.node.style.height=null;var i=this._elementPosition(this.node),o=this.activated?1:a,r=i.width*o/2;this._calculateLeftRight(t,e,r),this._calculateHeight(t.bottom,i.height),this.node.style.top=t.top+t.height+n+"px",this.node.classList.add("popover--bottom-shadow")}},{key:"_calculateHeight",value:function(t){var e=window.innerHeight,i=this._elementPosition(this.contents).height,o=e-t-2*n;o-i<0&&(this.node.style.height=o+"px")}},{key:"_calculateLeftRight",value:function(t,e,i){var o=window.innerWidth,n=e-i,a=n>0,r=e+i>o;a&&(this.node.style.left=n+"px"),r&&(this.node.style.right=o-t.right+"px"),n<0&&(this.node.style.left=t.left+"px")}}]),t}();e["default"]=s}])});